{"version":3,"sources":["singlis/views.cljs"],"mappings":";AAQA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKA;AAGL,AAAA,AAAMC;AAAN,AACE,AAAI,AAACC;AAAL,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;;AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAGe,AAAA,AAAA,AAACC;AAHhB;;;AAMF,AAAA,AAAMC,AAAaC,AAAEC;AAArB,AACE,AAAA,AAAA,AAACH,AAAkCE,AAAE,AAAA,AAAIC;;AAE3C,AAAA,AAAME,AAAYC,AAAEJ,AAAEK;AAAtB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAH,AACiBE,AACC,AAACJ,AAAAA,AAAAA,AAAEK,AAAAA;AAFrB,AAGuB,AAAAH,AAACH,AAAYC;;;AAEpC,AAAA,AAAMM;AAAN,AACE,AAAA,AAAAC,AAAMC,AAAe,AAAA,AAAA,AAACC;AAAtB,AAAAF,AACMG,AAAQ,AAAA,AAAA,AAACD;AADf,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAKG,AAAA,AAAA,AAACN,AAA6BK,AAE9B,AAAA,AAAA,AAACL,AAA8BK,AAE/B,AAAA,AAAA,AAACL,AAA2BK;AAT/B,AAUwB,AAAA,AAAA,AAACV;AAVzB,AAWG,AAAAa,AAAMD;AAANC,AAAA,AAAA,AAAAA,AAAAC,AAAA,AAAAD,AAAA;AAAA,AAAA,AAAAA;AAAA;AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAA,AAAA;;;AAAA;AAAA,AAAA,AAAA;;;;AAAA;;;AAXH,AAAA,AAkBI,AAAI,AAACE,AACH,AAACjB,AACDD","names":["singlis.views/metamask-presence-notification","singlis.views/metamask-connectivity-notification","singlis.streaming/metamask-connected?","re-frame.core/dispatch","singlis.views/update-form","k","event","p1__49540#","singlis.views/form-input","t","state","singlis.views/main-panel","cljs.core/deref","stream-values","re_frame.core.subscribe","status","G__49541","cljs.core/Keyword","singlis.streaming/metamask-installed?"],"sourcesContent":["(ns singlis.views\n  (:require\n   [re-frame.core :as re-frame]\n   [singlis.subs :as subs]\n   [singlis.streaming :refer [metamask-installed? metamask-connected?]]\n   ))\n\n\n(def metamask-presence-notification\n  [:div {:style {:background-color \"red\"}} \"MetaMask extension is required for this site, please install it at: https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en\"])\n\n(defn metamask-connectivity-notification []\n  (if (metamask-connected?)\n    [:div {:style {:background-color \"green\"} } \"MetaMask Connected\"]\n    [:button\n     {:on-click #(re-frame.core/dispatch [:enable-metamask])}\n     \"MetaMask Disconnected, click to connect\"]))\n\n(defn update-form [k event]\n  (re-frame/dispatch [:stream-values k (-> event .-target .-value)]))\n\n(defn form-input [t k state]\n  [:input {:type t\n           :value (k state)\n           :on-change #(update-form k %)}])\n\n(defn main-panel []\n  (let [stream-values @(re-frame/subscribe [::subs/stream-values])\n        status @(re-frame/subscribe [::subs/status])]\n    [:div\n     [:h1 \"Welcome to Singlis\"]\n     [:h3 \"Recipient\"]\n     (form-input \"text\" :recipient stream-values)\n     [:h3 \"Quantity\"]\n     (form-input \"number\" :quantity stream-values)\n     [:h3 \"Amount of Hours\"]\n     (form-input \"number\" :hours stream-values)\n     [:button {:on-click #(re-frame/dispatch [:create-stream])} \"Submit\"]\n     (case status\n       :finished [:h4 \"Finished!\"]\n       :requesting-approval [:h4 \"Awaiting approval..\"]\n       :processing [:h4 \"Processing..\"]\n       :failed [:h4 \"Something seems to have gone wrong, please make sure the values are correct.\"]\n       nil)\n     [:footer\n      (if (metamask-installed?)\n        (metamask-connectivity-notification)\n        metamask-presence-notification)\n      ]]))\n"]}